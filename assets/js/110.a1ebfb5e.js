(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{472:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"passportjsá„…á…³á†¯-á„á…©á†¼á„’á…¢-á„…á…©á„€á…³á„‹á…µá†«-á„‹á…µá†«á„Œá…³á†¼-á„€á…µá„‚á…³á†¼-á„†á…¡á†«á„ƒá…³á†¯á„€á…µðŸ˜Š"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#passportjsá„…á…³á†¯-á„á…©á†¼á„’á…¢-á„…á…©á„€á…³á„‹á…µá†«-á„‹á…µá†«á„Œá…³á†¼-á„€á…µá„‚á…³á†¼-á„†á…¡á†«á„ƒá…³á†¯á„€á…µðŸ˜Š"}},[t._v("#")]),t._v(" PassportJSë¥¼ í†µí•´ ë¡œê·¸ì¸ ì¸ì¦ ê¸°ëŠ¥ ë§Œë“¤ê¸°ðŸ˜Š")]),t._v(" "),a("h2",{attrs:{id:"passport"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#passport"}},[t._v("#")]),t._v(" Passport")]),t._v(" "),a("p",[t._v("PassportëŠ” Node.jsë¥¼ ìœ„í•œ Authentication Middlewareì´ë‹¤.")]),t._v(" "),a("p",[t._v("ìš°ë¦¬ëŠ” ì‚¬ìš©ìž ì¸ì¦ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ Passportë¼ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.")]),t._v(" "),a("p",[t._v("ì¸ì¦(Authentication)ì´ëž€ ë¸Œë¼ìš°ì € ìƒì—ì„œ ì¿ í‚¤ë¥¼ ì„¤ì •í•´ì£¼ë©´ ê·¸ ì¿ í‚¤ë¥¼ í†µí•´ì„œ ì‚¬ìš©ìž ID ë“±ì„ ì•Œ ìˆ˜ ìžˆê³ , ì´ë¥¼ í†µí•´ Passportê¹Œ ë¸Œë¼ìš°ì €ì—ì„œ ìžë™ìœ¼ë¡œ ì¿ í‚¤ë¥¼ ê°€ì ¸ì™€ì„œ ì¸ì¦ì´ ì™„ë£Œëœ User Objectë¥¼ Controllerì— ë„˜ê²¨ì£¼ëŠ” ê²ƒì´ë‹¤.")]),t._v(" "),a("p",[t._v("ê·¸ë¦¬ê³  PassportëŠ” ìž‘ì€ ëª¨ë“ˆë“¤ë¡œ ì´ë£¨ì–´ì ¸ ìžˆì–´ì„œ ëŒ€ë¶€ë¶„ì˜ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë“¤(íŽ˜ì´ìŠ¤ë¶, ê¹ƒí—ˆë¸Œ, êµ¬ê¸€, ìŠ¤íŒ€ ë“±)ë¡œë¶€í„° ì¸ì¦ì„ ë°›ì„ ìˆ˜ë„ ìžˆë‹¤.")]),t._v(" "),a("blockquote",[a("p",[t._v("ì¿ í‚¤: ì¿ í‚¤ëŠ” ìš°ë¦¬ê°€ ë¸Œë¼ìš°ì €ì— ì €ìž¥í•  ìˆ˜ ìžˆëŠ” ê²ƒë“¤ì´ë‹¤. ì´ ì •ë³´ì—ëŠ” ëª¨ë“  ìš”ì²­(Request)ì— ëŒ€í•´ì„œ ë°±ì—”ë“œë¡œ ì „ì†¡ë  ì •ë³´ë“¤ì´ ë‹´ê²¨ì ¸ ìžˆë‹¤.")])]),t._v(" "),a("p",[t._v("Passportê°€ í•˜ëŠ” ì¼ì€ ì¿ í‚¤ì˜ ìƒì„±, ì €ìž¥ì„ í•œ ì´í›„ì— í•´ë‹¹ ì¿ í‚¤ë¥¼ ìœ ì €ì—ê²Œ ë³´ë‚´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. ì‹¤ì œ ê³¼ì •ì€ ì´ê²ƒë³´ë‹¤ í›¨ì”¬ ë” ë³µìž¡í•˜ì§€ë§Œ ê·¸ ë¶€ë¶„ì— ëŒ€í•´ì„œëŠ” Passportê°€ ì•Œì•„ì„œ í•´ì£¼ë‹ˆ ë„ˆë¬´ ê±±ì •í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.")]),t._v(" "),a("p",[t._v("Passportì—ì„œ ì½”ë“œ êµ¬í˜„ì€ ì•„ëž˜ì—ì„œ ë³´ëŠ” ê²ƒê³¼ ê°™ì´ ê·¸ë¦¬ ë³µìž¡í•˜ì§€ ì•Šë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" passport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"local"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// If this function gets called, authentication was successful.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// `req.user` contains the authenticated user.")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/users/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("ëˆ„êµ°ê°€ "),a("code",[t._v("/login")]),t._v("ìœ¼ë¡œ postë¥¼ í•˜ë©´ "),a("code",[t._v("passport.authenticate")]),t._v("ë¼ëŠ” ê²ƒì„ í˜¸ì¶œí•œë‹¤. ê·¸ë¦¬ê³  "),a("code",[t._v("'local'")]),t._v("ì´ë¼ëŠ” ê²ƒì€ Strategy(ì „ëžµ)ì´ë¼ê³  í•˜ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ì˜ ê²½ìš°ì—ëŠ” 'facebook,', 'github' ë“±ê³¼ ê°™ì€ ì „ëžµì„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.")]),t._v(" "),a("p",[t._v("ê·¸ë¦¬ê³  ì¸ì¦ì´ ë˜ê³ ë‚œ í›„ì—ëŠ” functionì´ ì‹¤í–‰ëœë‹¤. ê·¸ë¦¬ê³  functionì•ˆì„ ì‚´íŽ´ë³´ë©´ "),a("code",[t._v("req.user")]),t._v("ë¼ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤. ë³´ë‹¤ì‹œí”¼ PassportëŠ” ì§ì ‘ "),a("code",[t._v("req.user")]),t._v("ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤. ì´ê²ƒì´ ë°”ë¡œ í˜„ìž¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìžê°€ ëœë‹¤.")]),t._v(" "),a("h2",{attrs:{id:"á„†á…©á„ƒá…²á†¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#á„†á…©á„ƒá…²á†¯"}},[t._v("#")]),t._v(" ëª¨ë“ˆ")]),t._v(" "),a("h3",{attrs:{id:"passport-local-mongoose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#passport-local-mongoose"}},[t._v("#")]),t._v(" passport-local-mongoose")]),t._v(" "),a("p",[t._v("passport-local-mongoose ëª¨ë“ˆì€ ì‚¬ìš©ìž ê¸°ëŠ¥(User functionality)ì„ ì¶”ê°€í•´ì£¼ëŠ” ëª¨ë“ˆì´ë‹¤. ìš°ë¦¬ì˜ User modelì„ ìœ„í•´ì„œ ì‚¬ìš©ë  ê²ƒì´ë‹¤. ê¸°ë³¸ì ì¸ ì‚¬ìš©ìž ì¸ì¦ ê¸°ëŠ¥(íŒ¨ìŠ¤ì›Œë“œ ìƒì„±, ë³€ê²½, í™•ì¸ ì•”í˜¸í™” ë“±)")]),t._v(" "),a("h2",{attrs:{id:"localauthentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localauthentication"}},[t._v("#")]),t._v(" LocalAuthentication")]),t._v(" "),a("p",[t._v("name, email, avatarUrl ë“±ì„ ê°€ì§€ëŠ” Userë¼ëŠ” Modelì„ ì•„ëž˜ì™€ ê°™ì´ ìƒì„±í•œë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// models/User.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mongoose"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" passportLocalMongoose "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"passport-local-mongoose"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userSchema "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Schema")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  email"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  avatarUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  facebookId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  githubId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Number"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Mongoose, MongoDBë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— passport-local-mongooseì„ í”ŒëŸ¬ê·¸ì¸ìœ¼ë¡œì„œ ì¶”ê°€í•œë‹¤.")]),t._v("\nuserSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("passportLocalMongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" usernameField"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" model "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Model")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userSchema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"passport-local-mongoose-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#passport-local-mongoose-2"}},[t._v("#")]),t._v(" Passport-Local Mongoose")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/saintedlama/passport-local-mongoose",target:"_blank",rel:"noopener noreferrer"}},[t._v("Passport-Local Mongoose"),a("OutboundLink")],1),t._v("ëŠ” íŒ¨ìŠ¤ì›Œë“œ ì„¤ì •, í™•ì¸ ë“±ì„ ìžë™ì ìœ¼ë¡œ í•´ì£¼ëŠ” Mongoose Pluginì´ë‹¤. Documentë¥¼ ì°¸ê³ í•˜ë©´ setPassword, changPassword, authenticate ë“± ì—¬ëŸ¬ ì¸ìŠ¤í„´ìŠ¤ ë©”ì†Œë“œë“¤ì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤. ê·¸ë¦¬ê³  Main Options í•­ëª©ì—ì„œ ì—¬ëŸ¬ê°€ì§€ ì˜µì…˜ë“¤ì„ í™•ì¸í•  ìˆ˜ ìžˆëŠ”ë°, ê·¸ì¤‘ ìš°ë¦¬ëŠ” usernameFieldë¼ëŠ” ì˜µì…˜ì„ ì‚¬ìš©í•  ê²ƒì´ë‹¤. ì´ ì˜µì…˜ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ usernameìœ¼ë¡œ fieldë¥¼ ëª…ì‹œí•œë‹¤. ì—¬ê¸°ì„œ usernameì€ ë‚´ ì´ë¦„ì´ ë  ìˆ˜ë„ ìžˆê³ , ì´ë©”ì¼ì´ ë  ìˆ˜ë„ ìžˆë‹¤. ì•„ë¬´íŠ¼ passportLocalMongooseì—ê²Œ ì–´ë–¤ Fieldë¥¼ usernameìœ¼ë¡œ ì‚¬ìš©í•  ê²ƒì¸ì§€ë¥¼ ì•Œë ¤ì¤˜ì•¼í•œë‹¤. ìš°ë¦¬ëŠ” ì¼ë‹¨ emailì„ usernameìœ¼ë¡œ ì‚¬ìš©í•  ê²ƒì´ë‹¤.")]),t._v(" "),a("blockquote",[a("p",[t._v("ì„¤ì¹˜: "),a("code",[t._v("npm install passport-local-mongoose")])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// passport.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" passport "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"passport"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" User "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./models/User"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// passportì—ê²Œ Statege(ë¡œê·¸ì¸ í•˜ëŠ” ë°©ì‹)ì„ ì‚¬ìš©í•˜ë¼ê³  ë§í•˜ëŠ” ê²ƒì´ë‹¤.")]),t._v("\npassport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createStrategy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"paaport-passport-local"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#paaport-passport-local"}},[t._v("#")]),t._v(" paaport, passport-local")]),t._v(" "),a("blockquote",[a("p",[t._v("ì„¤ì¹˜: npm install passport passport-local")]),t._v(" "),a("blockquote",[a("p",[t._v("passportëŠ” passportì´ê³ , passport-localì€ usernameê³¼ passwordë¥¼ ì“°ëŠ” ì‚¬ìš©ìž ì¸ì¦ ë°©ì‹(Strategy)ë¥¼ ì˜ë¯¸í•œë‹¤.")])])]),t._v(" "),a("p",[t._v("Passportì—ì„œ StategyëŠ” ë¡œê·¸ì¸ í•˜ëŠ” ë°©ì‹ì„ ì˜ë¯¸í•˜ëŠ” ë§ë¡œì„œ ì˜ˆë¥¼ë“¤ì–´ íŽ˜ì´ìŠ¤ë¶ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ê¸°, ê¹ƒí—ˆë¸Œë¡œ ë¡œê·¸ì¸í•˜ê¸°, usernameê³¼ passwordë¡œ ë¡œê·¸ì¸í•˜ê¸° ë“±ì„ ë§í•œë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// init.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./models/User"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"serializeuser-deserializeuser"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializeuser-deserializeuser"}},[t._v("#")]),t._v(" serializeUser, deserializeUser")]),t._v(" "),a("blockquote",[a("p",[t._v("serializeUser")]),t._v(" "),a("p",[t._v("'ì–´ë–¤ ì •ë³´ë¥¼ ì¿ í‚¤ì—ê²Œ ì£¼ëŠëƒ', 'ì¿ í‚¤ê°€ ì–´ë–¤ ì •ë³´ë¥¼ ê°€ì§ˆ ìˆ˜ ìžˆëŠëƒ'")]),t._v(" "),a("p",[t._v("'ì–´ë–¤ fieldê°€ ì¿ í‚¤ì— í¬í•¨ë  ê²ƒì¸ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” ì—­í• ì„ í•¨'")])]),t._v(" "),a("blockquote",[a("p",[t._v("deserializeUser")]),t._v(" "),a("p",[t._v("'ì–´ëŠ ì‚¬ìš©ìžì¸ì§€ ì–´ë–»ê²Œ ì°¾ëŠ”ê°€', 'ì¿ í‚¤ì˜ ì •ë³´ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©ìžë¡œ ì „í™˜í•˜ëŠ”ê°€'")])]),t._v(" "),a("p",[t._v("ì¿ í‚¤ì—ëŠ” ë„ˆë¬´ ë§Žì€ ì •ë³´ë¥¼ ì£¼ë©´ ì•ˆëœë‹¤. ì¿ í‚¤ëŠ” ì•„ì£¼ ìž‘ê¸° ë•Œë¬¸ì— ë¯¼ê°í•œ ì •ë³´ë¥¼ ë‹´ìœ¼ë©´ ë³´ì•ˆì— ì·¨ì•½í•˜ë‹¤.")]),t._v(" "),a("p",[t._v("passport-local-mongoose ë•ë¶„ì— ì•„ëž˜ì™€ ê°™ì´ shortcutì„ ì‚¬ìš©í•  ìˆ˜ ìžˆë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// passport.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ì˜¤ì§ user.idë§Œ ë‹´ì•„ì„œ ë³´ë‚´ëŠ” ê²ƒ")]),t._v("\npassport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serializeUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serializeUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// deserializeUser")]),t._v("\npassport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deserializeUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deserializeUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controllers/userController.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" User "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../models/User"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("postJoin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" password2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ìž˜ëª»ëœ ìš”ì²­")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"join"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pageTitle"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Join"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Register User")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ê³„ì • ìƒì„±")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ê³„ì • ê°€ìž…")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("postJoinì„ ë¯¸ë“¤ì›¨ì–´ë¡œ ë§Œë“¤ê²ƒì´ë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routers/globalRouter.js")]),t._v("\nglobalRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" postJoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" postLogin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controllers/userController.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("postJoin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("password "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" password2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ìž˜ëª»ëœ ìš”ì²­")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"join"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pageTitle"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Join"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ë¯¸ë“¤ì›¨ì–´ ìˆ˜í–‰í›„ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ê¸°")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// To Do: Log user in")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// local Strategyë¡œ passport ì¸ì¦")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" postLogin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" passport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"local"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ë¡œê·¸ì¸ì— ì‹¤íŒ¨í•˜ë©´ ë¡œê·¸ì¸í™”ë©´ìœ¼ë¡œ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ì„±ê³µí•˜ë©´ í™ˆìœ¼ë¡œ redirect í•´ì¤€ë‹¤.")]),t._v("\n  failureRedirect"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("login"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  successRedirect"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// middlewares.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("localsMiddleware")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("locals"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("siteName "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"YouTube"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("locals"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("routes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// passportê°€ ì‚¬ìš©ìžë¥¼ ë¡œê·¸ì¸ ì‹œí‚¬ ë•Œ userê°€ ë‹´ê¸´ objectë¥¼ reqì— ì˜¬ë ¤ì¤€ë‹¤.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ë”°ë¼ì„œ ì´ë¥¼ í…œí”Œë¦¿ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¯¸ë“¤ì›¨ì–´ì—ì„œ ì•„ëž˜ì™€ ê°™ì´ userë¥¼ ì €ìž¥í•œë‹¤.")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("locals"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("passportë¥¼ importí•˜ê³ , useí•œë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" passport "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"passport"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("passport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("passport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("session")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])])]),a("h3",{attrs:{id:"session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[t._v("#")]),t._v(" session")]),t._v(" "),a("p",[a("code",[t._v("npm install express-session")]),t._v("ìœ¼ë¡œ sessionì„ ì„¤ì¹˜í•œë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" session "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"express-session"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("session")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// secretì€ ë¬´ìž‘ìœ„ ë¬¸ìžì—´ë¡œì„œ session IDë¥¼ ì•”í˜¸í™” í•œë‹¤.")]),t._v("\n    secret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COOKIE_SECRET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    resave"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    saveUninitialized"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://randomkeygen.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("randomkeygen"),a("OutboundLink")],1),t._v("ì—ì„œ randomí•œ ë¬´ìž‘ìœ„ì˜ keyë¥¼ ì–»ì„ ìˆ˜ ìžˆë‹¤.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// .env\n// randomkeygenì—ì„œ ì–»ì€ keyê°’ ì €ìž¥\nCOOKIE_SECRET = "VspO%ub8mfs-0$&>9*6~tKH<F![[Z~""\n\n')])])]),a("p",[a("code",[t._v("header.pug")]),t._v("ì—ì„œ user.isAuthenticationì´ ì—†ì–´ì¡Œìœ¼ë¯€ë¡œ ê·¸ëƒ¥ userë¡œ ë³€ê²½í•´ì¤€ë‹¤.")]),t._v(" "),a("div",{staticClass:"language-pug extra-class"},[a("pre",{pre:!0,attrs:{class:"language-pug"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".header__column")])]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("ul")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token flow-control"}},[a("span",{pre:!0,attrs:{class:"token branch keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("user")]),t._v("\n\t\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])])]),a("p",[t._v("ë¡œê·¸ì¸ì´ ìž˜ ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ë©´ ë¡œê·¸ì¸ê³¼ ì¿ í‚¤ê°€ ì •ìƒì ìœ¼ë¡œ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤.")]),t._v(" "),a("p",[t._v("í•˜ì§€ë§Œ, íŽ˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨ í•´ë³´ë©´ ì¿ í‚¤ê°€ ì—†ì–´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìžˆë‹¤.")]),t._v(" "),a("p",[t._v("ì´ê²ƒì„ mongoDBë¥¼ ì´ìš©í•´ì„œ í•´ê²°í•´ë³´ìž.")]),t._v(" "),a("h2",{attrs:{id:"mongodbá„…á…³á†¯-á„‹á…µá„‹á…­á†¼á„’á…¢á„‰á…¥-cookie-á„Œá…¥á„Œá…¡á†¼á„’á…¡á„€á…µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodbá„…á…³á†¯-á„‹á…µá„‹á…­á†¼á„’á…¢á„‰á…¥-cookie-á„Œá…¥á„Œá…¡á†¼á„’á…¡á„€á…µ"}},[t._v("#")]),t._v(" MongoDBë¥¼ ì´ìš©í•´ì„œ cookie ì €ìž¥í•˜ê¸°")]),t._v(" "),a("p",[a("code",[t._v("npm install connect-mongo")]),t._v("ë¡œ connect-mongoë¥¼ ì„¤ì¹˜í•œë‹¤.")]),t._v(" "),a("p",[t._v("Sessionì„ MongoDBì— ì €ìž¥í•´ì„œ ë¸Œë¼ìš°ì €ê°€ ìƒˆë¡œê³ ì¹¨ ë˜ì–´ë„ ì„¸ì…˜ì´ ìœ ì§€ë˜ê²Œ í•œë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// app.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" mongoose "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mongoose"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MongoStore "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"connect-mongo"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" CookieStore "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MongoStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("session")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    secret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COOKIE_SECRET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    resave"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    saveUninitialized"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    store"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CookieStore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mongooseConnection"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" mongoose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"middlewareá„…á…³á†¯-á„á…©á†¼á„’á…¢-routesá„‹á…´-á„Žá…®á†¯á„‹á…µá†¸á„‹á…³á†¯-á„Œá…¦á„’á…¡á†«á„’á…¡á„€á…µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middlewareá„…á…³á†¯-á„á…©á†¼á„’á…¢-routesá„‹á…´-á„Žá…®á†¯á„‹á…µá†¸á„‹á…³á†¯-á„Œá…¦á„’á…¡á†«á„’á…¡á„€á…µ"}},[t._v("#")]),t._v(" Middlewareë¥¼ í†µí•´ Routesì˜ ì¶œìž…ì„ ì œí•œí•˜ê¸°")]),t._v(" "),a("h3",{attrs:{id:"middleware-á„‰á…¢á†¼á„‰á…¥á†¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#middleware-á„‰á…¢á†¼á„‰á…¥á†¼"}},[t._v("#")]),t._v(" Middleware ìƒì„±")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// middlewares.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ë¡œê·¸ì¸í•œ ì‚¬ìš©ìžë¼ë©´ í™ˆìœ¼ë¡œ Redirect í•´ì¤€ë‹¤.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onlyPublic")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ì‚¬ìš©ìžë¼ë©´ í™ˆìœ¼ë¡œ Redirect í•´ì¤€ë‹¤.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("onlyPrivate")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"router-á„‰á…¥á†¯á„Œá…¥á†¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#router-á„‰á…¥á†¯á„Œá…¥á†¼"}},[t._v("#")]),t._v(" Router ì„¤ì •")]),t._v(" "),a("p",[t._v("ìœ„ì—ì„œ ë§Œë“  ë¯¸ë“¤ì›¨ì–´ë¥¼ í†µí•´ Routerì—ì„œ í•´ë‹¹í•˜ëŠ” ê²½ë¡œì— ëŒ€í•´ì„œ ì¶œìž…ì„ ì œí•œí•œë‹¤.")]),t._v(" "),a("p",[t._v("ì˜ˆë¥¼ë“¤ì–´ì„œ ë¡œê·¸ì¸í•œ ìœ ì €ëŠ” Join, Loginì— ì ‘ì†í•˜ì§€ ëª»í•˜ê²Œ í•˜ëŠ” ê²ƒ, ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ìœ ì €ëŠ” í”„ë¡œí•„ ìˆ˜ì •, íŒ¨ìŠ¤ì›Œë“œ ë³€ê²½ì„ ì œí•œí•˜ëŠ” ê²ƒ ë“±ì´ ìžˆë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routers/globalRouter.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onlyPublic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../middlewares"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nglobalRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPublic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getJoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nglobalRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("join"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPublic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" postJoin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" postLogin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nglobalRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("logout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" logout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routers/userRouter.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onlyPrivate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../middlewares"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nuserRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("editProfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" editProfile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nuserRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("changePassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" changePassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routers/globalRouter.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" uploadVideo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../middlewares"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Upload")]),t._v("\nvideoRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getUpload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nvideoRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("upload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uploadVideo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" postUpload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Edit Video")]),t._v("\nvideoRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("editVideo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" getEditVideo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nvideoRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("editVideo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" postEditVideo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Delete Video")]),t._v("\nvideoRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteVideo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onlyPrivate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deleteVideo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"logout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#logout"}},[t._v("#")]),t._v(" Logout")]),t._v(" "),a("p",[t._v("ë¡œê·¸ì•„ì›ƒì€ ì •ë§ ê°„ë‹¨í•˜ë‹¤. ì•„ëž˜ì™€ ê°™ì´ "),a("code",[t._v("req.logout()")]),t._v("ë§Œ ì¶”ê°€í•´ì£¼ë©´ passportê°€ ì•Œì•„ì„œ ì²˜ë¦¬í•´ì¤€ë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("logout")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("logout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("redirect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("home"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"github-login"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-login"}},[t._v("#")]),t._v(" Github Login")]),t._v(" "),a("p",[t._v("passport strategies ì¤‘ì—ì„œ passport-githubë¥¼ ì‚¬ìš©í•´ github ë¡œê·¸ì¸ì„ êµ¬í˜„í•  ê²ƒì´ë‹¤.")]),t._v(" "),a("p",[a("code",[t._v("npm install passport-github")]),t._v("ë¡œ ì„¤ì¹˜ í›„ì— ë¨¼ì € "),a("a",{attrs:{href:"https://github.com/settings/applications/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("developer application"),a("OutboundLink")],1),t._v("ì—ì„œ ìƒˆë¡œìš´ Applicationì„ ìƒì„±í•´ì•¼ í•œë‹¤. ì´ë•Œ callback URLì€ "),a("code",[t._v("http://localhost:4000/auth/github/callback")]),t._v("ê³¼ ê°™ì´ ìž‘ì„±í•œë‹¤. ì´ê²ƒì€ ë³€ê²½í•´ë„ ìƒê´€ ì—†ë‹¤.")]),t._v(" "),a("h3",{attrs:{id:"á„’á…ªá†«á„€á…§á†¼á„‡á…§á†«á„‰á…®-á„Žá…®á„€á…¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#á„’á…ªá†«á„€á…§á†¼á„‡á…§á†«á„‰á…®-á„Žá…®á„€á…¡"}},[t._v("#")]),t._v(" í™˜ê²½ë³€ìˆ˜ ì¶”ê°€")]),t._v(" "),a("p",[t._v("Application ìƒì„±ì™„ë£Œë˜ë©´, Client IDì™€ Client SecretëŠ” ë‹¤ë¥¸ì‚¬ëžŒê³¼ëŠ” ì ˆëŒ€ ê³µìœ í•˜ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì—, .env í™˜ê²½ë³€ìˆ˜ íŒŒì¼ì— Client IDì™€ Client Secretì„ ì„ ì–¸í–ˆë‹¤.")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('// .env\nGITHUB_CLIENT_ID = "88d41a39a8e6af4103ff"\nGITHUB_CLIENT_SECRET = "35f3bc886295a7fada74a386a2f7a4b3c303f460"\n')])])]),a("h3",{attrs:{id:"configure-strategy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-strategy"}},[t._v("#")]),t._v(" Configure Strategy")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// passport.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\npassport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GithubStrategy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      clientID"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GITHUB_CLIENT_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      clientSecret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GITHUB_CLIENT_SECRET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routes.githubCallback: /auth/github/callback")]),t._v("\n      callbackURL"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://localhost:4000")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("githubCallback"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// userController.jsì— ì„ ì–¸ë¨")]),t._v("\n    githubLoginCallback\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controllers/userController.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" githubLogin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" passport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ì²«ë²ˆì§¸ì™€ ë‘ë²ˆì§¸ ParameterëŠ” ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Parameterì´ë¯€ë¡œ ì–¸ë”ë°”(_)ë¡œ ì„ ì–¸í–ˆë‹¤.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("githubLoginCallback")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" profile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// profileì˜ _jsonì´ë¼ëŠ” í•„ë“œì—ì„œ ë°›ì•„ì˜¨ ê°’ë“¤ì´ë‹¤.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    _json"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" avatar_url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" avatarUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" email "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" profile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// MongoDBì—ì„œ emailì„ ê¸°ì¤€ìœ¼ë¡œ ìœ ì €ë¥¼ ì°¾ëŠ”ë‹¤.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" user "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOne")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" email "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// í•´ë‹¹ ìœ ì €ê°€ ì¡´ìž¬í•œë‹¤ë©´, ì•„ëž˜ì™€ ê°™ì´ id, avatarë¥¼ ì €ìž¥í•˜ê³  callback functionìœ¼ë¡œ ìœ ì €ë¥¼ ì „ë‹¬í•œë‹¤.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("githubId "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("avatarUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" avatarUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// í•´ë‹¹ ìœ ì €ê°€ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì•„ëž˜ì™€ ê°™ì´ ìƒˆë¡œìš´ ìœ ì €ë¥¼ ë§Œë“¤ê³ , Callback Functionìœ¼ë¡œ ìƒˆë¡œìš´ ìœ ì €ë¥¼ ì „ë‹¬í•œë‹¤.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newUser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" User"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      email"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      githubId"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      avatarUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"requests"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requests"}},[t._v("#")]),t._v(" Requests")]),t._v(" "),a("p",[t._v("ìœ„ì—ì„œ Github Strategyì˜ ì„¤ì •ì„ ì™„ë£Œí•˜ê³  ì´ì œëŠ” Routes, Router ì„¤ì •ì„ í•´ì¤˜ì•¼ í•œë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Github")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GITHUB")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/auth/github"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GITHUB_CALLBACK")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/auth/github/callback"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\ngithub"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GITHUB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\ngithubCallback"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GITHUB_CALLBACK")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// routers/globalRouter.js")]),t._v("\n\nglobalRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" githubLogin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nglobalRouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("githubCallback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  passport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" failureRedirect"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/login"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  postGithubLogin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-pug extra-class"},[a("pre",{pre:!0,attrs:{class:"language-pug"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// views/partials/socialLogin.pug")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".social-login")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("button"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".social-login--github")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token attributes"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("span")]),t._v(" \n                "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("i"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".fab")]),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".fa-github")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" Continue with Github\n")])])]),a("h2",{attrs:{id:"facebook-login"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#facebook-login"}},[t._v("#")]),t._v(" Facebook Login")]),t._v(" "),a("p",[t._v("Facebook login êµ¬í˜„ ë°©ì‹ì€ Githubì™€ Googleê³¼ ë§¤ìš° ë¹„ìŠ·í•˜ì§€ë§Œ í•œê°€ì§€ ë‹¤ë¥¸ ì ì´ ìžˆë‹¤. ê·¸ê²ƒì€ ë³´ì•ˆ ë¬¸ì œë¡œ facebookì´ ê¹Œë‹¤ë¡­ê¸° ë•Œë¬¸ì— httpsë¥¼ ì¨ì•¼í•˜ëŠ” ê²ƒì´ë‹¤.")]),t._v(" "),a("h3",{attrs:{id:"facebook-developer-á„‰á…¥á†¯á„Œá…¥á†¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#facebook-developer-á„‰á…¥á†¯á„Œá…¥á†¼"}},[t._v("#")]),t._v(" Facebook Developer ì„¤ì •")]),t._v(" "),a("p",[t._v("ë”°ë¼ì„œ "),a("a",{attrs:{href:"https://developers.facebook.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Facebook Developer"),a("OutboundLink")],1),t._v("ì—ì„œ ì„¤ì •í•´ì•¼ í•  ê²ƒë“¤ì´ ìžˆë‹¤.")]),t._v(" "),a("ol",[a("li",[t._v("ì•±ì„ ë§Œë“ ë‹¤.")]),t._v(" "),a("li",[t._v("ì›¹ì‚¬ì´íŠ¸ URLì„ ì¶”ê°€í•œë‹¤.")]),t._v(" "),a("li",[t._v("ìƒë‹¨ì— ë³´ë©´ ì•± ID ì˜†ì— ê°œë°œëª¨ë“œì™€ Liveëª¨ë“œê°€ ìžˆëŠ”ë° ì´ ëª¨ë“œë¥¼ Live ëª¨ë“œë¡œ í•˜ê²Œ ë˜ë©´ httpsë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ê°œë°œ ëª¨ë“œë¡œ ë³€ê²½í•œë‹¤.")]),t._v(" "),a("li",[t._v("ì•± ê²€ìˆ˜ - ë‚´ ê¶Œí•œ ë° ê¸°ëŠ¥ì—ì„œ emailê³¼ defaultë¥¼ ìŠ¹ì¸ ë°›ì•„ì•¼ í•´ë‹¹ ì •ë³´ë“¤ì„ ë°›ì•„ì˜¬ ìˆ˜ ìžˆë‹¤.")])]),t._v(" "),a("h3",{attrs:{id:"scope-profilefield-á„‹á…©á†¸á„‰á…§á†«-á„‰á…¡á„‹á…­á†¼"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scope-profilefield-á„‹á…©á†¸á„‰á…§á†«-á„‰á…¡á„‹á…­á†¼"}},[t._v("#")]),t._v(" Scope, profileField ì˜µì…˜ ì‚¬ìš©")]),t._v(" "),a("p",[t._v("Developer ì‚¬ì´íŠ¸ì—ì„œ ëª¨ë“  ì„¤ì •ì„ ë§ˆì³¤ë‹¤ë©´ "),a("code",[t._v("passport.authenticate()")]),t._v("ì˜ scope ì˜µì…˜ê³¼ profilefield ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼í•œë‹¤. "),a("a",{attrs:{href:"http://www.passportjs.org/packages/passport-facebook/",target:"_blank",rel:"noopener noreferrer"}},[t._v("passport-facebook"),a("OutboundLink")],1),t._v(" ì˜µì…˜ì„ í™•ì¸í•  ìˆ˜ ìžˆë‹¤.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// passport.js")]),t._v("\n\npassport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FacebookStrategy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      clientID"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FACEBOOK_CLIENT_ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      clientSecret"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FACEBOOK_CLIENT_SECRET")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      callbackURL"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("http://localhost:4000")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("facebookCallback"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// profileFields ì˜µì…˜ìœ¼ë¡œ id, name, photo, emailì„ ìš”ì²­í•œë‹¤.")]),t._v("\n      profileFields"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"displayName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"photos"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    facebookLoginCallback\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controllers/userController.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" facebookLogin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" passport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("authenticate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"facebook"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// scopeë¥¼ í†µí•´ì„œ ìš°ë¦¬ê°€ í•„ìš”í•œ emailì˜ ê¶Œí•œì„ ìš”ì²­í•œë‹¤.")]),t._v("\n    scope"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"email"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"á„Œá…¥á†¼á„…á…µ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#á„Œá…¥á†¼á„…á…µ"}},[t._v("#")]),t._v(" ì •ë¦¬")]),t._v(" "),a("h3",{attrs:{id:"local-á„‡á…¡á†¼á„‰á…µá†¨-á„‹á…µá†«á„Œá…³á†¼-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#local-á„‡á…¡á†¼á„‰á…µá†¨-á„‹á…µá†«á„Œá…³á†¼-authentication"}},[t._v("#")]),t._v(" Local ë°©ì‹ ì¸ì¦(Authentication)")]),t._v(" "),a("p",[t._v("Local ë°©ì‹ì€ User nameê³¼ Passwordë¥¼ ì´ìš©í•œ ì¸ì¦ ë°©ì‹ìœ¼ë¡œ ë¹„êµì  ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìžˆë‹¤.")]),t._v(" "),a("ul",[a("li",[t._v("Usernameê³¼ Passwordë¥¼ Post ë°©ì‹ìœ¼ë¡œ ì „ë‹¬")]),t._v(" "),a("li",[t._v("passport-local-mongooseê°€ Passwordê°€ ë§žëŠ”ì§€ ì²´í¬")]),t._v(" "),a("li",[t._v("Passwordê°€ ë§žë‹¤ë©´ PassportëŠ” Cookieë¥¼ ìƒì„±")])]),t._v(" "),a("h3",{attrs:{id:"github-google-facebook-and-etc-á„‹á…µá†«á„Œá…³á†¼-authentication"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#github-google-facebook-and-etc-á„‹á…µá†«á„Œá…³á†¼-authentication"}},[t._v("#")]),t._v(" Github, Google, Facebook and etc ì¸ì¦(Authentication)")]),t._v(" "),a("p",[t._v("Github ë°©ì‹ì€ Local ë°©ì‹ê³¼ëŠ” ë‹¤ë¥´ë‹¤.")]),t._v(" "),a("ul",[a("li",[t._v("ì‚¬ìš©ìžëŠ” ê¹ƒí—ˆë¸Œ ì¸ì¦ íŽ˜ì´ì§€ë¡œ ì´ë™í•´ì„œ ê¶Œí•œ ìŠ¹ì¸ì„ í•œë‹¤.")]),t._v(" "),a("li",[t._v("ê¹ƒí—ˆë¸Œ ì¸ì¦ íŽ˜ì´ì§€ëŠ” /auth/gihub/callback ì´ë¼ëŠ” URLë¡œ ì‚¬ìš©ìžì˜ ì •ë³´ë¥¼ ë³´ë‚´ì¤€ë‹¤.")]),t._v(" "),a("li",[t._v("PassportëŠ” ìš°ë¦¬ê°€ ë§Œë“  githubLoginCallback í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.")]),t._v(" "),a("li",[t._v("í•´ë‹¹ í•¨ìˆ˜ë¥¼ í†µí•´ì„œ ì‚¬ìš©ìžì˜ ëª¨ë“  ì •ë³´ë¥¼ ë°›ëŠ”ë‹¤.(profile)\n"),a("ul",[a("li",[t._v("í•´ë‹¹ í•¨ìˆ˜ì˜ ì¡°ê±´ì€ callbackí•¨ìˆ˜ë¥¼ Return í•˜ëŠ”ê²ƒì´ë‹¤.")])])]),t._v(" "),a("li",[t._v("Callback í•¨ìˆ˜ë¥¼ í†µí•´ ë°›ì€ Returnì— userê°€ ì¡´ìž¬í•˜ë©´, PassportëŠ” ì´ userë¥¼ í†µí•´ Cookieë¥¼ ë§Œë“ ë‹¤.")])])])}),[],!1,null,null,null);s.default=e.exports}}]);