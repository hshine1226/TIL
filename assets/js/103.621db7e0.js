(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{465:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"video-검색"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#video-검색"}},[t._v("#")]),t._v(" Video 검색")]),t._v(" "),a("h2",{attrs:{id:"controller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controller"}},[t._v("#")]),t._v(" Controller")]),t._v(" "),a("p",[t._v("Regular Expression을 이용해서 대소문자를 구분하지 않는 조건으로 검색을 한다.")]),t._v(" "),a("p",[a("code",[t._v("Video.find")]),t._v("를 통해서 검색을 수행할 수 있다.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// controllers/videoController.js")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("search")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    query"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" term"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" searchingBy "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 빈 배열의 videos, 어떤 video도 찾지 못한다면 빈 배열로 render 되고,")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// video를 찾는다면 videos가 render된다. ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// reassign하기 때문에 const 대신 let을 쓴다.")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" videos "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    videos "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" $regex"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" searchingBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" $options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"i"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"search"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pageTitle"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Search"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" searchingBy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" videos "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])])]),a("h2",{attrs:{id:"layout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#layout"}},[t._v("#")]),t._v(" Layout")]),t._v(" "),a("div",{staticClass:"language-pug extra-class"},[a("pre",{pre:!0,attrs:{class:"language-pug"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// views/search.pug")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends layouts/main")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("include mixins/videoBlock")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("block content")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".search__header")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("h3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("Searching for: #{searchingBy}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".search__videos")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token flow-control"}},[a("span",{pre:!0,attrs:{class:"token branch keyword"}},[t._v("if")]),t._v(" videos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")])]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("h5")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("No Videos Found")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token flow-control"}},[a("span",{pre:!0,attrs:{class:"token each"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("each")]),t._v(" video "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")])]),t._v(" videos")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token mixin"}},[a("span",{pre:!0,attrs:{class:"token name function"}},[t._v("+videoBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")])]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("title"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".title")])]),t._v(",\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("views"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".views")])]),t._v(",\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("videoFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".videoFile")])]),t._v(",\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mixin으로 video.id를 넘겨준다.")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".id")])]),t._v("\n      })\n")])])]),a("div",{staticClass:"language-pug extra-class"},[a("pre",{pre:!0,attrs:{class:"language-pug"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// views/videoDetail.pug")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends layouts/main")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("block content")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__player")])]),t._v(" \n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token attributes"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fileUrl"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__info")])]),t._v("   "),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v(" ")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token attributes"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("editVideo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),t._v(") Edit Video\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("h5"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__title")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token code"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("title")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("span"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__views")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token code"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("views")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("p"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__description")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token code"}},[t._v("video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("description")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__comments")])]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// comments의 길이가 1이면 comment라고 표시하고,")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// comments의 길이가 1이 아니라면 comments라고 표시한다.")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token flow-control"}},[a("span",{pre:!0,attrs:{class:"token branch keyword"}},[t._v("if")]),t._v(" video"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("comments"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("span"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__comment-number")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("1 comment")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token flow-control"}},[a("span",{pre:!0,attrs:{class:"token branch keyword"}},[t._v("else")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token tag"}},[t._v("span"),a("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__comment-number")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token plain-text"}},[t._v("#{video.comments.length} comments")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"추가"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#추가"}},[t._v("#")]),t._v(" 추가")]),t._v(" "),a("p",[t._v("추가로 댓글 기능은 Ajax, Vanilla JavaScript로 만들 것이다.")]),t._v(" "),a("p",[t._v("왜냐하면 비디오를 추가할 때마다 form의 형태로 Back-end에 보내는데, 그럴 때마다 새로고침이 된다.")]),t._v(" "),a("p",[t._v("하지만 우리는 추후에 댓글을 작성하면 API로 댓글을 보내서 새로고침 없이 댓글이 표시되게 할 것이다.")])])}),[],!1,null,null,null);s.default=e.exports}}]);