(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{462:function(t,a,s){"use strict";s.r(a);var n=s(25),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"mongoose-populate"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mongoose-populate"}},[t._v("#")]),t._v(" Mongoose populate")]),t._v(" "),s("p",[t._v("몽구스에는 populate라는 기능이 있다. 해당 기능은 ObjectId를 실제 객체로 치환시키고 싶을 때 사용한다.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" video "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("creator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// creator를 실제 객체로 치환한다.")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" video "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("populate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"creator"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("creator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"populate-미사용-결과"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#populate-미사용-결과"}},[t._v("#")]),t._v(" populate 미사용 결과")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("5ee0816b9203fb7d33bddf58\n")])])]),s("h2",{attrs:{id:"populate-사용-결과"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#populate-사용-결과"}},[t._v("#")]),t._v(" populate 사용 결과")]),t._v(" "),s("p",[t._v("아래와 같이 populate를 통해 creator를 치환해주면, 해당 creator가 만든 video id 목록을 확인할 수도 있다.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  videos: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    5ee8844acc3e465bf6b14533,\n    5ee88605cc3e465bf6b14534,\n    5ee886e3502b8f62245a03a3,\n    5ee887f1502b8f62245a03a4\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n  comments: "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(",\n  _id: 5ee0816b9203fb7d33bddf58,\n  name: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'최준혁'")]),t._v(",\n  email: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hshine1226@gmail.com'")]),t._v(",\n  __v: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(",\n  githubId: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31975706")]),t._v(",\n  googleId: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("104800319884752320000")]),t._v(",\n  avatarUrl: "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'uploads/avatars/52e8baf497b8fafc608d6e01b85a2165'")]),t._v(",\n  facebookId: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("135595834827089")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"creator-사용-예시"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creator-사용-예시"}},[t._v("#")]),t._v(" creator 사용 예시")]),t._v(" "),s("p",[t._v("pupulate를 사용해서 creator를 실제 객체로 치환시켰기 때문에 "),s("code",[t._v("video.creator")]),t._v("를 통해서 id, name을 확인해서 아래와같이 화면에 업로드한 유저를 출력할 수 있다.")]),t._v(" "),s("div",{staticClass:"language-pug extra-class"},[s("pre",{pre:!0,attrs:{class:"language-pug"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// views/videoDetail.pug")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token attr-class"}},[t._v(".video__author")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v("Uploaded by\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[t._v("a"),s("span",{pre:!0,attrs:{class:"token attributes"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[t._v("routes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("userDetail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("creator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])])]),t._v(")"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v("video"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("creator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name\n\n")])])]),s("h2",{attrs:{id:"정리"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#정리"}},[t._v("#")]),t._v(" 정리")]),t._v(" "),s("p",[t._v("populate를 너무 맹신해서는 안된다. 왜냐하면 이는 DB에서 합쳐주는 것이 아니고 JavaScript 단에서 합쳐주는 것이기 때문에 성능이 그렇게 좋지 못하다. 그리고 특히 populate가 중첩되면 성능 문제가 생길 확률이 커진다.")])])}),[],!1,null,null,null);a.default=e.exports}}]);